name: Run Snyk and other tools to check vulnerabilities

on:
  workflow_call:
    inputs:
      project_type:
        required: true
        type: string
        default: "node"
    secrets:
      SNYK_TOKEN:
        required: true

jobs:
  snyk_run:
    runs-on: ubuntu-latest
    environment: production
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    
    - id: check_vulnerability
      uses: nolram/github-actions/actions/check_vulnerability@main
      with:
        snyk_token: ${{ secrets.SNYK_TOKEN }}
        project_type: ${{ inputs.project_type }}
